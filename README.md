# Задание PostgreSQL Authentication

## Часть 1. Настройки по умолчанию

1. Какие методы аутентификации используются для подключения по TCP/IP с адресов 127.0.0.1/32 и ::1/128?

Методы используются "Trust"

![](/pic/um.um.png)

2. Какие методы аутентификации используются для подключения по TCP/IP со всех остальных адресов, кроме указанных в предыдущем пункте по протоколу?

Методы используются "MD5"

![](/pic/um.dois.png)

3. Верно ли следующее утверждение: пароль роли app хранится в виде функция_хеширования password (пароль хранится в поле rolpassword)? Если не верно, то приведите описание алгоритма, который используется для хранения хеша.

Верно, это "MD5"

![](/pic/um.tres.png)

4. Какое значение (t будет означать да, f - нет) имеют поля rolsuper, rolcreaterole, rolcreatedb, rolbypassrls с указанием назначения данных столбцов (см. https://postgrespro.ru/docs/postgresql/12/catalog-pg-authid)

![](/pic/um.quatro.png)

## Часть 2. Изменение метода аутентификации

1. Какие методы аутентификации используются для подключения по TCP/IP с адресов 127.0.0.1/32 и ::1/128?

Методы используются "Trust"

![](/pic/um.cinco.png)

2. Какие методы аутентификации используются для подключения по TCP/IP со всех остальных адресов, кроме указанных в предыдущем пункте по протоколу?

Методы используются "Reject"

![](/pic/um.seis.png)

3. Верно ли следующее утверждение: пароль роли app хранится в виде функция_хеширования password (пароль хранится в поле rolpassword)? Если не верно, то приведите описание алгоритма, который используется для хранения хеша.

Верно, это "MD5"

![](/pic/um.sete.png)

4. Какое значение (t будет означать да, f - нет) имеют поля rolsuper, rolcreaterole, rolcreatedb, rolbypassrls с указанием назначения данных столбцов

![](/pic/um.oito.png)

5. Почему значения полей rolcanlogin и rolpassword для роли app не изменились и вы по-прежнему можете подключиться с помощью psql без указания пароля, хотя в pg_hba.conf для host all all all указано reject?

Потому что мы заходим в базу данных на локальной машине, на той же, на которой запущена сама база данных. Поэтому используется метод "Trust"

![](/pic/um.nove.png)

# Задание PostgreSQL CIS Benchmarks

1. Какие методы не рекомендуется использовать для удалённых подключений?

* Trust	
* Password
* Ident
* MD5

2. Какие методы рекомендуется использовать для удалённых подключений?

* Scram-sha-256 

# Задание PostgreSQL ПРД

1. Здесь права только на чтение

![](/pic/tres.um.png)

2. Здесь нет никаких прав, даже на чтение

![](/pic/tres.dois.png)
